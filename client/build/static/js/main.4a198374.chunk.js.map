{"version":3,"sources":["components/rooms/RoomForm.jsx","components/rooms/Room.jsx","components/rooms/RoomList.jsx","components/rooms/RoomSection.jsx","components/users/User.jsx","components/users/UserList.jsx","components/users/UserSection.jsx","components/messages/Message.jsx","components/messages/MessageList.jsx","components/messages/MessageForm.jsx","components/messages/MessageSection.jsx","components/App.jsx","index.js"],"names":["RoomForm","e","preventDefault","node","this","refs","room","RoomName","value","props","addRoom","react_default","a","createElement","onSubmit","bind","className","type","ref","placeholder","Component","Room","_this$props","setRoom","_this$props2","active","activeRoom","href","onClick","name","RoomList","_this","rooms","map","item","rooms_Room","Object","assign","key","id","RoomSection","rooms_RoomList","rooms_RoomForm","User","user","UserList","users","users_User","UserSection","users_UserList","Message","message","createdAt","fecha","format","Date","author","body","MessageList","messages","messages_Message","MessageForm","addMessage","input","undefined","MessageSection","messages_MessageList","messages_MessageForm","App","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","connected","socket","io","on","onConnect","onDisconnect","onAddRoom","onMessageAdd","push","setState","emit","length","_this$state","roomId","rooms_RoomSection","users_UserSection","messages_MessageSection","ReactDOM","render","components_App","document","getElementById"],"mappings":"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","file":"static/js/main.4a198374.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nclass RoomForm extends Component {\n  onSubmit(e) {\n    e.preventDefault()\n    const node = this.refs.room\n    const RoomName = node.value\n    this.props.addRoom(RoomName)\n    node.value = ''\n  }\n  render() {\n    return (\n      <form onSubmit={ this.onSubmit.bind(this) }>\n        <div className=\"form-group\">\n          <input type=\"text\" ref=\"room\" className=\"form-control\" placeholder=\"Добавить комнату\" />\n        </div>\n      </form>\n    )\n  }\n}\n\nRoomForm.propTypes = {\n  addRoom: PropTypes.func.isRequired\n}\n\nexport default RoomForm","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nclass Room extends Component {\n  onClick(e) {\n    e.preventDefault()\n    const { setRoom, room } = this.props\n    setRoom(room)\n  }\n  render() {\n    const { room, activeRoom } = this.props\n    const active = room === activeRoom ? 'active' : ''\n    return (\n      <li className={active}>\n        <a href=\"/\" onClick={ this.onClick.bind(this) }>{ room.name }</a>\n      </li>\n    )\n  }\n}\n\nRoom.propTypes = {\n  room: PropTypes.object.isRequired,\n  setRoom: PropTypes.func.isRequired,\n  activeRoom: PropTypes.object.isRequired\n};\n\nexport default Room","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nimport Room from './Room'\n\nclass RoomList extends Component {\n  render() {\n    const { rooms } = this.props\n    return (\n      <ul>\n        {\n          rooms.map(item =>\n            <Room key={item.id} room={item} {...this.props} />\n          )\n        }\n      </ul>\n    )\n  }\n}\n\nRoomList.propTypes = {\n  rooms: PropTypes.array.isRequired,\n  setRoom: PropTypes.func.isRequired,\n  activeRoom: PropTypes.object.isRequired\n}\n\nexport default RoomList","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport RoomForm from './RoomForm'\nimport RoomList from './RoomList'\n\nclass RoomSection extends Component {\n  render() {\n    return (\n      <div className=\"support panel panel-primary\">\n        <div className=\"panel-heading\">\n          <strong>Комнаты</strong>\n        </div>\n        <div className=\"panel-body rooms\">\n          <RoomList {...this.props}/>\n          <RoomForm {...this.props}/>\n        </div>\n      </div>\n    )\n  }\n}\n\nRoomSection.propTypes = {\n  rooms: PropTypes.array.isRequired,\n  setRoom: PropTypes.func.isRequired,\n  addRoom: PropTypes.func.isRequired,\n  activeRoom: PropTypes.object.isRequired\n}\n\nexport default RoomSection","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nclass User extends Component {\n  render() {\n    const { user } = this.props\n    return (\n      <li>\n        <a href=\"/\">{ user.name }</a>\n      </li>\n    )\n  }\n}\n\nUser.propTypes = {\n  user: PropTypes.object.isRequired,\n};\n\nexport default User","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nimport User from './User'\n\nclass UserList extends Component {\n  render() {\n    const { users } = this.props\n    return (\n      <ul>\n        {\n          users.map(item =>\n            <User key={item.id} user={item} />\n          )\n        }\n      </ul>\n    )\n  }\n}\n\nUserList.propTypes = {\n  users: PropTypes.array.isRequired,\n}\n\nexport default UserList","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nimport UserList from './UserList'\n\nclass UserSection extends Component {\n  render() {\n    return (\n      <div className=\"support panel panel-primary\">\n        <div className=\"panel-heading\">\n          <strong>Пользователи</strong>\n        </div>\n        <div className=\"panel-body rooms\">\n          <UserList {...this.props}/>\n        </div>\n      </div>\n    )\n  }\n}\n\nUserSection.propTypes = {\n  users: PropTypes.array.isRequired\n}\n\nexport default UserSection","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport fecha from 'fecha'\n\nclass Message extends Component {\n  render() {\n    let { message } = this.props\n    let createdAt = fecha.format(new Date(message.createdAt), 'MM-DD-YYYY [Время] HH:mm')\n    return (\n      <li className=\"message\">\n        <div className=\"author\">\n          <strong>{message.author}</strong>\n          <i className=\"timestamp\">{createdAt}</i>\n        </div>\n        <div className=\"body\">{message.body}</div>\n      </li>\n    )\n  }\n}\n\nMessage.propTypes = {\n  message: PropTypes.object.isRequired\n}\n\nexport default Message","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport Message from './Message'\n\nclass MessageList extends Component {\n  render(){\n    return (\n      <ul>\n        { this.props.messages.map(message => \n            <Message\n              key={message.id}\n              message={message}\n            />)\n        }\n      </ul>\n    )\n  }\n}\n\nMessageList.propTypes = {\n  messages: PropTypes.array.isRequired\n}\n\nexport default MessageList","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\n\n\nclass MessageForm extends Component {\n  onSubmit(e) {\n    e.preventDefault()\n    const node = this.refs.message\n    const message = node.value\n    this.props.addMessage(message)\n    node.value = ''\n  }\n  render(){\n    let input\n    if (this.props.activeRoom.id !== undefined ) {\n      input = (\n        <input\n          ref=\"message\"\n          type=\"text\"\n          className=\"form-control\"\n          placeholder=\"Написать сообщение\"\n        />\n      )\n    }\n    return (\n      <form onSubmit={this.onSubmit.bind(this)}>\n        <div className=\"form-group\">\n          {input}\n        </div>\n      </form>\n    )\n  }\n}\n\nMessageForm.propTypes = {\n  activeRoom: PropTypes.object.isRequired,\n  addMessage: PropTypes.func.isRequired\n}\n\nexport default MessageForm","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport MessageList from './MessageList'\nimport MessageForm from './MessageForm'\n\nclass MessageSection extends Component {\n  render(){\n    let {activeRoom} = this.props\n    return (\n      <div className=\"messages-container panel panel-default\">\n        <div className=\"panel-heading\">\n          <strong>{ activeRoom.name }</strong>\n        </div>\n        <div className=\"panel-body messages\">\n          <MessageList { ...this.props } />\n          <MessageForm { ...this.props } />\n        </div>\n      </div>\n    )\n  }\n}\n\nMessageSection.propTypes = {\n  messages: PropTypes.array.isRequired,\n  activeRoom: PropTypes.object.isRequired,\n  addMessage: PropTypes.func.isRequired\n}\n\nexport default MessageSection","import  React, { Component } from 'react'\nimport io from 'socket.io-client'\nimport RoomSection from './rooms/RoomSection'\nimport UserSection from './users/UserSection'\nimport MessageSection from './messages/MessageSection';\n\nclass App extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      rooms: [],\n      users: [],\n      messages: [],\n      activeRoom: {},\n      connected: false\n    }\n  }\n\n  componentDidMount() {\n    let socket = this.socket = io('http://localhost:3000/')\n    socket.on('connect', this.onConnect.bind(this))\n    socket.on('disconnect', this.onDisconnect.bind(this))\n    socket.on('room add', this.onAddRoom.bind(this))\n    socket.on('message add', this.onMessageAdd.bind(this))\n  }\n  onMessageAdd(message) {\n    let { messages } = this.state\n    messages.push(message)\n    this.setState({ messages })\n  }\n\n  onConnect(){\n    this.setState({ connected: true })\n  }\n  onDisconnect(){\n    this.setState({ connected: false })\n  }\n\n  onAddRoom(room) {\n    let { rooms } = this.state\n    rooms.push(room)\n    this.setState({ rooms })\n  }\n\n  addRoom(name) { // TODO: send to server\n    let { rooms } = this.state\n    this.socket.emit('room add', { id: rooms.length, name })\n  }\n\n  setRoom(activeRoom) {\n    this.setState({ activeRoom })\n  }\n\n  addMessage(body) {\n    let { activeRoom, messages, users } = this.state\n    let createdAt = new Date()\n    let author = users.length > 0 ? users[0].name : 'anonymous'\n    this.socket.emit('message add', {\n      id: messages.length,\n      roomId: activeRoom.id,\n      body,\n      createdAt,\n      author\n    })\n  }\n\n    render() {\n      return (\n        <div className=\"app\">\n          <div className=\"nav\">\n            <RoomSection\n              {...this.state}\n              addRoom={this.addRoom.bind(this)}\n              setRoom={this.setRoom.bind(this)}\n            />\n            <UserSection\n              users={this.state.users}\n            />\n          </div>\n          <MessageSection\n            {...this.state}\n            addMessage={this.addMessage.bind(this)}\n          />\n        </div>\n      )\n    }\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './components/App'\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}