(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{34:function(e,t,a){e.exports=a(67)},64:function(e,t){},67:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(31),o=a.n(r),c=a(1),i=a(2),u=a(4),l=a(3),m=a(5),p=a(32),h=a.n(p),d=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"onSubmit",value:function(e){e.preventDefault();var t=this.refs.room,a=t.value;this.props.addRoom(a),t.value=""}},{key:"render",value:function(){return s.a.createElement("form",{onSubmit:this.onSubmit.bind(this)},s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{type:"text",ref:"room",className:"form-control",placeholder:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043d\u0430\u0442\u0443"})))}}]),t}(n.Component),b=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"onClick",value:function(e){e.preventDefault();var t=this.props;(0,t.setRoom)(t.room)}},{key:"render",value:function(){var e=this.props,t=e.room,a=t===e.activeRoom?"active":"";return s.a.createElement("li",{className:a},s.a.createElement("a",{href:"/",onClick:this.onClick.bind(this)},t.name))}}]),t}(n.Component),v=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.rooms;return s.a.createElement("ul",null,t.map(function(t){return s.a.createElement(b,Object.assign({key:t.id,room:t},e.props))}))}}]),t}(n.Component),f=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"support panel panel-primary"},s.a.createElement("div",{className:"panel-heading"},s.a.createElement("strong",null,"\u041a\u043e\u043c\u043d\u0430\u0442\u044b")),s.a.createElement("div",{className:"panel-body rooms"},s.a.createElement(v,this.props),s.a.createElement(d,this.props)))}}]),t}(n.Component),j=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.user;return s.a.createElement("li",null,s.a.createElement("a",{href:"/"},e.name))}}]),t}(n.Component),O=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.users;return s.a.createElement("ul",null,e.map(function(e){return s.a.createElement(j,{key:e.id,user:e})}))}}]),t}(n.Component),y=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"support panel panel-primary"},s.a.createElement("div",{className:"panel-heading"},s.a.createElement("strong",null,"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438")),s.a.createElement("div",{className:"panel-body rooms"},s.a.createElement(O,this.props)))}}]),t}(n.Component),E=a(33),g=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.message,t=E.a.format(new Date(e.createdAt),"MM-DD-YYYY [\u0412\u0440\u0435\u043c\u044f] HH:mm");return s.a.createElement("li",{className:"message"},s.a.createElement("div",{className:"author"},s.a.createElement("strong",null,e.author),s.a.createElement("i",{className:"timestamp"},t)),s.a.createElement("div",{className:"body"},e.body))}}]),t}(n.Component),k=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("ul",null,this.props.messages.map(function(e){return s.a.createElement(g,{key:e.id,message:e})}))}}]),t}(n.Component),N=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"onSubmit",value:function(e){e.preventDefault();var t=this.refs.message,a=t.value;this.props.addMessage(a),t.value=""}},{key:"render",value:function(){var e;return void 0!==this.props.activeRoom.id&&(e=s.a.createElement("input",{ref:"message",type:"text",className:"form-control",placeholder:"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"})),s.a.createElement("form",{onSubmit:this.onSubmit.bind(this)},s.a.createElement("div",{className:"form-group"},e))}}]),t}(n.Component),C=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.activeRoom;return s.a.createElement("div",{className:"messages-container panel panel-default"},s.a.createElement("div",{className:"panel-heading"},s.a.createElement("strong",null,e.name)),s.a.createElement("div",{className:"panel-body messages"},s.a.createElement(k,this.props),s.a.createElement(N,this.props)))}}]),t}(n.Component),R=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={rooms:[],users:[],messages:[],activeRoom:{},connected:!1},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.socket=h()("http://localhost:3000/");e.on("connect",this.onConnect.bind(this)),e.on("disconnect",this.onDisconnect.bind(this)),e.on("room add",this.onAddRoom.bind(this)),e.on("message add",this.onMessageAdd.bind(this))}},{key:"onMessageAdd",value:function(e){var t=this.state.messages;t.push(e),this.setState({messages:t})}},{key:"onConnect",value:function(){this.setState({connected:!0})}},{key:"onDisconnect",value:function(){this.setState({connected:!1})}},{key:"onAddRoom",value:function(e){var t=this.state.rooms;t.push(e),this.setState({rooms:t})}},{key:"addRoom",value:function(e){var t=this.state.rooms;this.socket.emit("room add",{id:t.length,name:e})}},{key:"setRoom",value:function(e){this.setState({activeRoom:e})}},{key:"addMessage",value:function(e){var t=this.state,a=t.activeRoom,n=t.messages,s=t.users,r=new Date,o=s.length>0?s[0].name:"anonymous";this.socket.emit("message add",{id:n.length,roomId:a.id,body:e,createdAt:r,author:o})}},{key:"render",value:function(){return s.a.createElement("div",{className:"app"},s.a.createElement("div",{className:"nav"},s.a.createElement(f,Object.assign({},this.state,{addRoom:this.addRoom.bind(this),setRoom:this.setRoom.bind(this)})),s.a.createElement(y,{users:this.state.users})),s.a.createElement(C,Object.assign({},this.state,{addMessage:this.addMessage.bind(this)})))}}]),t}(n.Component);o.a.render(s.a.createElement(R,null),document.getElementById("root"))}},[[34,2,1]]]);
//# sourceMappingURL=main.4a198374.chunk.js.map