(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{42:function(e,t,a){e.exports=a(78)},72:function(e,t){},78:function(e,t,a){"use strict";a.r(t);var n=a(2),s=a(3),r=a(5),o=a(4),i=a(6),c=a(0),u=a.n(c),m=a(36),l=a.n(m),h=a(80),p=a(79),d=a(37),b=a.n(d),f=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"onSubmit",value:function(e){e.preventDefault();var t=this.refs.room,a=t.value;this.props.addRoom(a),t.value=""}},{key:"render",value:function(){return u.a.createElement("form",{onSubmit:this.onSubmit.bind(this)},u.a.createElement("div",{className:"form-group"},u.a.createElement("input",{type:"text",ref:"room",className:"form-control",placeholder:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043d\u0430\u0442\u0443"})))}}]),t}(c.Component),v=a(81),j=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"onClick",value:function(e){e.preventDefault();var t=this.props,a=t.setRoom,n=t.room;a(n),this.props.history.push("/room/".concat(n.id))}},{key:"render",value:function(){var e=this.props,t=e.room,a=t===e.activeRoom?"active":"";return u.a.createElement("li",{className:a},u.a.createElement("a",{href:"/",onClick:this.onClick.bind(this)},t.name))}}]),t}(c.Component),O=Object(v.a)(j),y=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.rooms;return u.a.createElement("ul",null,t.map(function(t){return u.a.createElement(O,Object.assign({key:t.id,room:t},e.props))}))}}]),t}(c.Component),E=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{className:"support panel panel-primary"},u.a.createElement("div",{className:"panel-heading"},u.a.createElement("strong",null,"\u041a\u043e\u043c\u043d\u0430\u0442\u044b")),u.a.createElement("div",{className:"panel-body rooms"},u.a.createElement(y,this.props),u.a.createElement(f,this.props)))}}]),t}(c.Component),g=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.user;return u.a.createElement("li",null,e.name)}}]),t}(c.Component),k=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.users;return u.a.createElement("ul",null,e.map(function(e){return u.a.createElement(g,{key:e.id,user:e})}))}}]),t}(c.Component),N=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"onSubmit",value:function(e){e.preventDefault();var t=this.refs.userName,a=t.value;this.props.setUserName(a),t.value=""}},{key:"render",value:function(){return u.a.createElement("form",{onSubmit:this.onSubmit.bind(this)},u.a.createElement("div",{className:"form-group"},u.a.createElement("input",{type:"text",ref:"userName",className:"form-control",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0438\u043c\u044f"})))}}]),t}(c.Component),C=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{className:"support panel panel-primary"},u.a.createElement("div",{className:"panel-heading"},u.a.createElement("strong",null,"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438")),u.a.createElement("div",{className:"panel-body rooms"},u.a.createElement(k,this.props),u.a.createElement(N,this.props)))}}]),t}(c.Component),R=a(40),S=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.message,t=R.a.format(new Date(e.createdAt),"MM-DD-YYYY [\u0412\u0440\u0435\u043c\u044f] HH:mm");return u.a.createElement("li",{className:"message"},u.a.createElement("div",{className:"author"},u.a.createElement("strong",null,e.author),u.a.createElement("i",{className:"timestamp"},t)),u.a.createElement("div",{className:"body"},e.body))}}]),t}(c.Component),D=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return u.a.createElement("ul",null,this.props.messages.map(function(e){return u.a.createElement(S,{key:e.id,message:e})}))}}]),t}(c.Component),w=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"onSubmit",value:function(e){e.preventDefault();var t=this.refs.message,a=t.value;this.props.addMessage(a),t.value=""}},{key:"render",value:function(){var e;return void 0!==this.props.activeRoom.id&&(e=u.a.createElement("input",{ref:"message",type:"text",className:"form-control",placeholder:"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"})),u.a.createElement("form",{onSubmit:this.onSubmit.bind(this)},u.a.createElement("div",{className:"form-group"},e))}}]),t}(c.Component),M=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.activeRoom;return u.a.createElement("div",{className:"messages-container panel panel-default"},u.a.createElement("div",{className:"panel-heading"},u.a.createElement("strong",null,e.name)),u.a.createElement("div",{className:"panel-body messages"},u.a.createElement(D,this.props),u.a.createElement(w,this.props)))}}]),t}(c.Component),A=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e))).state={rooms:[],users:[],messages:[],activeRoom:{},connected:!1},a}return Object(i.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.socket=b()("http://localhost:3006/");e.on("connect",this.onConnect.bind(this)),e.on("disconnect",this.onDisconnect.bind(this)),e.on("room add",this.onAddRoom.bind(this)),e.on("rooms all",this.onShowAllRooms.bind(this)),e.on("message add",this.onMessageAdd.bind(this))}},{key:"onShowAllRooms",value:function(e){var t=this.state.rooms,a=this.props.roomId;if(t=e,this.setState({rooms:t}),!(e.length<1)&&a){var n=e.filter(function(e){return e.id===a});this.setRoom(n[0])}}},{key:"onMessageAdd",value:function(e){var t=this.state.messages;t.push(e),this.setState({messages:t})}},{key:"onConnect",value:function(){this.setState({connected:!0})}},{key:"onDisconnect",value:function(){this.setState({connected:!1})}},{key:"onAddRoom",value:function(e){var t=this.state.rooms;t.push(e),this.setState({rooms:t})}},{key:"addRoom",value:function(e){this.socket.emit("room add",{name:e})}},{key:"setRoom",value:function(e){this.setState({messages:[]}),this.setState({activeRoom:e}),this.socket.emit("join room",{room:e.id})}},{key:"setUserName",value:function(e){var t=this.state.users;t.push({id:t.length,name:e}),this.setState({users:t})}},{key:"addMessage",value:function(e){var t=this.state,a=t.activeRoom,n=t.messages,s=t.users,r=new Date,o=s.length>0?s[0].name:"anonymous";this.socket.emit("message add",{id:n.length,roomId:a.id,body:e,createdAt:r,author:o})}},{key:"render",value:function(){return u.a.createElement("div",{className:"app"},u.a.createElement("div",{className:"nav"},u.a.createElement(E,Object.assign({},this.state,{addRoom:this.addRoom.bind(this),setRoom:this.setRoom.bind(this)})),u.a.createElement(C,Object.assign({},this.state,{setUserName:this.setUserName.bind(this)}))),u.a.createElement(M,Object.assign({},this.state,{addMessage:this.addMessage.bind(this)})))}}]),t}(c.Component),I=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return u.a.createElement(h.a,null,u.a.createElement(p.a,{path:"/",render:function(e){var t,a=e.location;return a.pathname.match(/\/room\//)&&(t=a.pathname.slice(6,a.pathname.length))?u.a.createElement(A,{roomId:parseInt(t)}):u.a.createElement(A,{roomId:!1})}}))}}]),t}(c.Component);l.a.render(u.a.createElement(I,null),document.getElementById("root"))}},[[42,2,1]]]);
//# sourceMappingURL=main.13dc4d27.chunk.js.map